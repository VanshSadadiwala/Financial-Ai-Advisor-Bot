<!DOCTYPE html>
<html lang="en">
<head> 
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stock Market Analysis</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-chart-financial"></script>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body {
            background-color: #020202; /* Almost black */
            color: #e0e0e0; /* Light grey text for contrast */
            margin: 0;
            padding: 20px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }
        input {
            width: 60%;
            padding: 10px;
            font-size: 16px;
            margin-bottom: 20px;
            border-radius: 5px;
            border: none;
            text-align: center;
        }
        .buttons button, .forecast-buttons button {
            margin: 5px;
            margin-bottom: 40px;
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            background-color: #007bff;
            color: rgb(255, 255, 255);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .buttons button:hover, .forecast-buttons button:hover {
            background-color: rgb(78, 147, 220);
        }
        .buttons button.active-button, .forecast-buttons button.active-button {
            background-color: #00ffcc !important;
            color: #000 !important;
        }
        
        /* Navbar styles */
        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 2rem;
            background-color: #1a1a1a;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            gap: 20px;
        }
        
        .nav-left {
            display: flex;
            align-items: center;
            gap: 2rem;
        }
        
        .menu-toggle {
            font-size: 24px;
            cursor: pointer;
            color: #fff;
        }
        
        .nav-title {
            font-size: clamp(18px, 4vw, 24px);
            color: #fff;
            margin: 0;
            transition: all 0.3s ease;
            white-space: nowrap;
        }
        
        .nav-right .back-btn {
            padding: 6px 12px;
            background-color: #007bff;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
        }
        
        /* Sidebar styles */
        .sidebar {
            position: fixed;
            left: -250px;
            top: 0;
            width: 250px;
            height: 100%;
            background-color: #1a1a1a;
            padding-top: 70px;
            transition: 0.3s;
            z-index: 999;
        }
        
        .sidebar.active {
            left: 0;
        }
        
        .sidebar-item {
            padding: 1rem 2rem;
            color: #fff;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: 0.3s;
            position: relative;
        }
        
        .sidebar-item:hover {
            background-color: rgba(0, 255, 204, 0.1);
        }
        
        .sidebar-item.active {
            background-color: rgba(0, 255, 204, 0.2);
            color: #00ffcc;
        }
        
        /* Updated search container styles */
        .search-container {
            position: relative;
            width: 60%;
            display: flex;
            justify-content: center;
            align-items: stretch;
            gap: 10px;
            margin: 70px auto 0;
        }
        
        .search-container input {
            width: 100%;
            padding: 12px 40px 12px 15px;
            font-size: 16px;
            border-radius: 5px;
            border: none;
            text-align: left;
            height: 45px;
            box-sizing: border-box;
        }
        
        .search-icon {
            position: absolute;
            right: 15px;
            top: 35%;
            transform: translateY(-50%);
            color: #666;
            cursor: pointer;
        }

        
        /* New buttons styles */
        .buttons {
            width: 100%;
            display: flex;
            justify-content: center;
            gap: 10px;
            padding: 10px 0;
            margin: 10px 0;
        }
        
        /* Remove any extra margins from container */
        .container > * {
            margin-bottom: 0;
        }
        
        .chart-container {
            margin-top: 10px;
        }
        
        
        .trading-view {
            width: 100%;
            margin-bottom: 20px;
        }
        
        .main-chart {
            height: 500px !important;
            margin-bottom: 0;
            background: #1a1a1a;
            border-radius: 8px;
            padding: 15px;
            flex: 2;
        }
        
        .chart-container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(47, 55, 57, 0.9);
            border-radius: 15px;
            padding: 20px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 0 20px #00ffcc, 0 0 40px #00ffcc;
        }
        .volume-chart {
            height: 100px !important;
            margin-top: 20px;
            background: #1a1a1a;
            border-radius: 8px;
            padding: 15px;
        }
        
        .secondary-charts {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .trend-chart, .range-chart {
            flex: 1;
            height: 300px;
            background: #1a1a1a;
            border-radius: 8px;
            padding: 15px;
        }
        
        .stats-panel {
            display: flex;
            gap: 20px;
            justify-content: space-between;
            margin-top: 20px;
        }
        
        .stat-card {
            flex: 1;
            background: #1a1a1a;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }
        
        .stat-card h3 {
            margin: 0;
            color: #666;
            font-size: 14px;
        }
        
        .stat-card p {
            margin: 10px 0 0;
            font-size: 18px;
            color: #fff;
        }
        
        /* Chart Tooltips */
        .chartjs-tooltip {
            background: rgba(0, 0, 0, 0.8) !important;
            border-radius: 4px !important;
            padding: 8px !important;
        }
        
        canvas {
            background: #0a0e17;
        }
        
        /* Card or container styles */
        .card, .graph-container {
            background: rgba(26, 26, 26, 0.9); /* Semi-transparent dark grey */
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3); /* Soft shadow */
            padding: 20px;
            margin: 20px;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        /* Button styles */
        button:hover {
            background-color: rgb(78, 189, 220); 
        }
        
        /* Graph styles with enhanced gradient and elevation */
        .graph {
            background: #1a1a1a; /* Dark grey */
            border-radius: 15px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
            padding: 25px;
            transition: transform 0.4s, box-shadow 0.4s, background 0.4s;
        }
        
        /* Hover effect for graphs */
        .graph:hover {
            transform: translateY(-10px); /* Elevate the block */
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.7);
            background: linear-gradient(135deg, #1a1a1a, #00ffcc); /* Gradient effect */
        }
        
        /* Duration button styles */
        .duration-button {
            background-color: #1a1a1a; /* Match graph background */
            color: #e0e0e0; /* Light grey text */
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            box-shadow: none; /* Remove glow effect */
        }
        
        .duration-button:hover {
            background-color: #333333; /* Slightly lighter on hover */
        }
        
        /* Additional styles for layout */
        .container {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-around;
            align-items: center;
        }
        
        /* Add this to your existing CSS */
        .active-button {
            background-color: #00ffcc !important; /* Change the button color */
            color: #000 !important; /* Optional: Change text color for contrast */
        }
        
        /* Content Container Styles */
        .content-container {
            display: none;
            width: 100%;
            margin-top: 20px;
        }
        
        .content-container.active {
            display: block;
        }
        
        /* Forecast Section styles */
        /* Hide search container for non-stock analysis views by default */
        #futureForecastingContainer .search-container {
            display: block; /* Visible by default */
            margin-bottom: 20px;
            width: 60%;
            margin: 80px auto 0;
        }

        #newsContainer .search-container {
            display: none !important; /* Always hidden */
        }

        #futureForecastingContainer {
            margin-top: 80px;
            width: 100%;
        }

        #futureForecastingContainer .chart-container {
            background: rgba(47, 55, 57, 0.9);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 0 20px #00ffcc, 0 0 40px #00ffcc;
        }
        
        .forecast-search-icon {
            position: absolute;
            right: 15px;
            top: 35%;
            transform: translateY(-50%);
            color: #666;
        }

        .forecast-buttons {
            width: 100%;
            display: flex;
            justify-content: center;
            gap: 10px;
            padding: 10px 0;
            margin: 10px 0;
            flex-wrap: wrap;
        }

        .forecast-buttons button {
            margin: 5px;
            margin-bottom: 40px;
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            background-color: #007bff;
            color: rgb(255, 255, 255);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .forecast-buttons button:hover {
            background-color: rgb(78, 147, 220);
        }

        .forecast-buttons button.active-button {
            background-color: #00ffcc !important;
            color: #000 !important;
        }

        .forecast-buttons button:active {
            transform: translateY(0);
        }

        #forecastChart {
            background: #0a0e17;
        }

        /* News Section Styles */
        .news-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            padding: 20px;
            margin-top: 80px;
        }
        
        .news-card {
            background: rgba(26, 26, 26, 0.9);
            border-radius: 10px;
            overflow: hidden;
            transition: transform 0.3s;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }
        
        .news-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0, 255, 204, 0.2);
        }

        .news-card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .news-content {
            padding: 15px;
        }

        .news-content h3 {
            color: #fff;
            margin-bottom: 10px;
            font-size: 1.1em;
            line-height: 1.4;
        }

        .news-content p {
            color: #ccc;
            margin-bottom: 15px;
            font-size: 0.9em;
            line-height: 1.5;
        }

        .news-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            font-size: 0.8em;
            color: #888;
        }

        .news-source {
            color: #00ffcc;
            font-weight: bold;
        }

        .news-date {
            color: #888;
        }

        .read-more {
            display: inline-block;
            padding: 8px 16px;
            background-color: #00ffcc;
            color: #000;
            text-decoration: none;
            border-radius: 5px;
            font-weight: bold;
            transition: background-color 0.3s;
        }

        .read-more:hover {
            background-color: #00cc99;
        }

        .error-message {
            color: #ff4444;
            text-align: center;
            padding: 20px;
            font-size: 1.1em;
        }

        /* Updated Media Queries for better responsiveness */
        @media screen and (max-width: 1306px) {
            .secondary-charts {
                flex-direction: column;
                gap: 15px;
            }

            .trend-chart, .range-chart {
                height: 200px;
            }
        }

        @media screen and (max-width: 1180px) {
            .buttons{
                display: grid;
                grid-template-columns: repeat(6, 1fr);
                gap: 10px;
            }
            .secondary-charts {
                flex-direction: column;
                gap: 15px;
            }

            .trend-chart, .range-chart {
                height: 200px;
            }
        }

        @media screen and (max-width: 882px) {
            /* Stack stats panel */
            .stats-panel{
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                gap: 20px;
            }
            .navbar {
                padding: 0.8rem 1rem;
                gap: 10px;
            }

            .nav-right .back-btn {
                padding: 6px 12px;
                font-size: 14px;
            }

            .search-container {
                width: 90%;
                margin: 70px auto 0;
            }

            .search-container input {
                font-size: 14px;
                padding: 10px 35px 10px 12px;
            }

            .buttons, .forecast-buttons {
                padding: 5px;
                gap: 5px;
                flex-wrap: wrap;
                justify-content: center;
            }

            .buttons button, .forecast-buttons button {
                padding: 8px 12px;
                font-size: 12px;
                margin: 2px;
                margin-bottom: 20px;
                min-width: 80px;
            }

            .main-chart {
                height: 300px !important;
            }

            .volume-chart {
                height: 80px !important;
            }

            /* Stack secondary charts below main chart */
            .secondary-charts {
                flex-direction: column;
                gap: 15px;
            }

            .trend-chart, .range-chart {
                height: 200px;
            }


            .stat-card h3 {
                font-size: 12px;
            }

            .stat-card p {
                font-size: 16px;
            }
        }
        @media screen and (max-width: 731px) {
            /* Stack stats panel */
            .stats-panel{
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                gap: 20px;
            }
            .navbar {
                padding: 0.8rem 1rem;
                gap: 10px;
            }

            .nav-right .back-btn {
                padding: 6px 12px;
                font-size: 14px;
            }

            .search-container {
                width: 90%;
                margin: 70px auto 0;
            }

            .search-container input {
                font-size: 14px;
                padding: 10px 35px 10px 12px;
            }

            .buttons, .forecast-buttons {
                display: grid;
                grid-template-columns: repeat(3, 1fr);
            }

            .buttons button, .forecast-buttons button {
                padding: 8px 12px;
                font-size: 12px;
                margin: 2px;
                margin-bottom: 20px;
                min-width: 80px;
            }

            .main-chart {
                height: 300px !important;
            }

            .volume-chart {
                height: 80px !important;
            }

            /* Stack secondary charts below main chart */
            .secondary-charts {
                flex-direction: column;
                gap: 15px;
            }

            .trend-chart, .range-chart {
                height: 200px;
            }


            .stat-card h3 {
                font-size: 12px;
            }

            .stat-card p {
                font-size: 16px;
            }
        }
        
        /* Landscape mode optimizations */
        @media screen and (max-height: 600px) and (orientation: landscape) {
            .main-chart {
                height: 300px !important;
            }

            .volume-chart {
                height: 70px !important;
            }

            .trend-chart, .range-chart {
                height: 200px;
            }

            .buttons, .forecast-buttons {
                margin-bottom: 20px;
            }

            .buttons button, .forecast-buttons button {
                margin-bottom: 10px;
            }
        }


        @media screen and (max-width: 480px) {
            body {
                padding: 10px;
            }

            .navbar {
                display: grid;
                grid-template-columns: repeat(1, 1fr);
                padding: 0.5rem 0.8rem;
            }

            .nav-title {
                font-size: 16px;
            }

            .search-container {
                width: 95%;
            }

            .buttons, .forecast-buttons {
                gap: 5px;
            }

            .buttons button, .forecast-buttons button {
                width: calc(50% - 10px);
                margin: 5px;
                margin-bottom: 15px;
                font-size: 11px;
                padding: 6px 10px;
            }

            .chart-container {
                padding: 15px;
            }

            .main-chart {
                height: 250px !important;
            }

            .volume-chart {
                height: 60px !important;
            }

            .trend-chart, .range-chart {
                height: 180px;
            }

            .stats-panel{
                display: grid;
                grid-template-columns: repeat(1, 1fr);
                gap: 20px;
            }

            .stat-card h3 {
                font-size: 11px;
            }

            .stat-card p {
                font-size: 14px;
            }

            /* Adjust chart tooltips for mobile */
            .chartjs-tooltip {
                font-size: 12px !important;
                padding: 6px !important;
            }

            /* Adjust chart scales for mobile */
            canvas {
                max-height: 300px;
            }
        }


        /* High-DPI screen optimizations */
        @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
            canvas {
                image-rendering: -webkit-optimize-contrast;
                image-rendering: crisp-edges;
            }
        }

        /* Update Loading Bar Styles */
        #loadingContainer {
            display: none;
            width: 100%;
            margin-bottom: 20px;
        }

        #loadingContainer .loading-text {
            color: #fff;
            margin-bottom: 8px;
            font-size: 14px;
            font-weight: 500;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        #loadingContainer .progress-text {
            margin-right: 10px;
        }

        #loadingContainer .status-text {
            color: #00ffcc;
        }

        #loadingContainer .progress-bar {
            width: 100%;
            height: 8px;
            background: #1a1a1a;
            border-radius: 4px;
            overflow: hidden;
            box-shadow: 0 0 10px rgba(0, 255, 204, 0.2);
        }

        #loadingContainer .progress {
            width: 0%;
            height: 100%;
            background: linear-gradient(90deg, #00ffcc, #00ccff);
            transition: width 0.3s ease-in-out;
            position: relative;
        }

        /* Loading effect only visible from 50% onwards */
        #loadingContainer .progress::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(
                90deg,
                rgba(255, 255, 255, 0) 0%,
                rgba(255, 255, 255, 0.3) 50%,
                rgba(255, 255, 255, 0) 100%
            );
            animation: shimmer 1.5s infinite;
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
        }

        #loadingContainer .progress.loading::after {
            opacity: 1;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="nav-left">
            <i class="fas fa-bars menu-toggle"></i>
            <h1 class="nav-title" id="navTitle">Stock Analysis Dashboard</h1>
        </div>
        <div class="nav-right">
            <button class="back-btn">
                <i class="fas fa-arrow-left"></i> Back to Website
            </button>
        </div>
    </nav>

    <div class="sidebar">
        <a href="#" class="sidebar-item active" data-title="Stock Analysis Dashboard" data-target="stockAnalysisContainer">
            <i class="fas fa-chart-line"></i>
            <span>Stock Analysis</span>
        </a>
        <a href="#" class="sidebar-item" data-title="Future Forecasting Dashboard" data-target="futureForecastingContainer">
            <i class="fas fa-forward"></i>
            <span>Future Forecasting</span>
        </a>
        <a href="#" class="sidebar-item" data-title="News Dashboard" data-target="newsContainer">
            <i class="fas fa-newspaper"></i>
            <span>News</span>
        </a>
    </div>

    <!-- Main content area -->
    <div class="search-container" id="mainSearchContainer">
        <input type="text" id="stockInput" placeholder="Enter company name or ticker">
        <i class="fas fa-search search-icon"></i>
    </div>

    <!-- Stock Analysis Container -->
    <div id="stockAnalysisContainer" class="content-container active">
        <div class="buttons">
            <button data-interval="1min" onclick="updateTimeframe('1min')">1 Hour</button>
            <button data-interval="5min" onclick="updateTimeframe('15min')">1 Day</button>
            <button data-interval="60min" onclick="updateTimeframe('60min')">5 Days</button>
            <button data-interval="1day" onclick="updateTimeframe('1day')">1 Month</button>
            <button data-interval="1day" onclick="updateTimeframe('1day', null, '3month')">3 Months</button>
            <button data-interval="1week" onclick="updateTimeframe('1week')">6 Months</button>
            <button data-interval="1week" onclick="updateTimeframe('1week', null, '1year')">1 Year</button>
            <button data-interval="1month" onclick="updateTimeframe('1month', null, '4year')">4 Years</button>
            <button data-interval="1month" onclick="updateTimeframe('1month', null, '8year')">8 Years</button>
        </div>
        
        <div class="chart-container">
            <!-- Main Trading View Section -->
            <div class="trading-view">
                <!-- Candlestick Chart -->
                <div class="main-chart">
                    <canvas id="candlestickChart"></canvas>
                </div>
                
                <!-- Volume Chart -->
                <div class="volume-chart">
                    <canvas id="volumeChart"></canvas>
                </div>
            </div>

            <!-- Secondary Charts Section -->
            <div class="secondary-charts">
                <!-- Line Trend Chart -->
                <div class="trend-chart">
                    <canvas id="trendChart"></canvas>
                </div>
                
                <!-- Price Range Chart -->
                <div class="range-chart">
                    <canvas id="rangeChart"></canvas>
                </div>
            </div>

            <!-- Stats Panel -->
            <div class="stats-panel">
                <div class="stat-card">
                    <h3>Current Price</h3>
                    <p id="currentPrice">$0.00</p>
                </div>
                <div class="stat-card">
                    <h3>Day's Range</h3>
                    <p id="dayRange">$0.00 - $0.00</p>
                </div>
                <div class="stat-card">
                    <h3>Volume</h3>
                    <p id="volume">0</p>
                </div>
                <div class="stat-card">
                    <h3>Change</h3>
                    <p id="priceChange">0.00%</p>
                </div>
            </div>
        </div>
    </div>

    <div class="loading">
        <div class="spinner"></div>
    </div>

    <!-- --------------------------------------------------------------------------------------------------------------------- -->
    <!-- Future Forecasting Container -->
    <div id="futureForecastingContainer" class="content-container">
        <div class="search-container" id="forecastSearchContainer" style="display: flex !important;">
            <input type="text" id="forecastInput" placeholder="Enter company name or ticker for forecast">
            <i class="fas fa-search forecast-search-icon"></i>
        </div>

        <div class="forecast-buttons">
            <button data-interval="1min" onclick="updateTimeframe('1min')">1 Hour</button>
            <button data-interval="5min" onclick="updateTimeframe('15min')">1 Day</button>
            <button data-interval="60min" onclick="updateTimeframe('60min')">5 Days</button>
            <button data-interval="1day" onclick="updateTimeframe('1day')">1 Month</button>
            <button data-interval="1week" onclick="updateTimeframe('1week')">6 Months</button>
            <button data-interval="1week" onclick="updateTimeframe('1week', null, '1year')">1 Year</button>
            <button data-interval="1month" onclick="updateTimeframe('1month', null, '4year')">4 Years</button>
            <button data-interval="1month" onclick="updateTimeframe('1month', null, '8year')">8 Years</button>
        </div>
        
        <div class="chart-container">
            <!-- Loading bar with status messages -->
            <div id="loadingContainer">
                <div class="loading-text">
                    <span class="progress-text">0%</span>
                    <span class="status-text"></span>
                </div>
                <div class="progress-bar">
                    <div class="progress"></div>
                </div>
            </div>
            <div class="main-chart">
                <canvas id="forecastChart"></canvas>
            </div>
            
            <!-- Add stats panel for forecast -->
            <div class="stats-panel">
                <div class="stat-card">
                    <h3>Predicted Price</h3>
                    <p id="predictedPrice">$0.00</p>
                </div>
                <div class="stat-card">
                    <h3>Prediction Range</h3>
                    <p id="predictionRange">$0.00 - $0.00</p>
                </div>
                <div class="stat-card">
                    <h3>Confidence Level</h3>
                    <p id="confidenceLevel">0%</p>
                </div>
                <div class="stat-card">
                    <h3>Predicted Change</h3>
                    <p id="predictedChange">0.00%</p>
                </div>
            </div>
        </div>
    </div>

    <!-- News Container -->
    <div id="newsContainer" class="content-container">
        <div class="news-grid">
            <!-- News cards will be dynamically inserted here -->
        </div>
    </div>

    <script>        
        document.addEventListener('DOMContentLoaded', function() {
            const menuToggle = document.querySelector('.menu-toggle');
            const sidebar = document.querySelector('.sidebar');
            const navTitle = document.getElementById('navTitle');
            const mainSearchContainer = document.getElementById('mainSearchContainer');
            const forecastSearchContainer = document.getElementById('forecastSearchContainer');
            const stockInput = document.getElementById('stockInput');
            const forecastInput = document.getElementById('forecastInput');
            let mainChart, volumeChart, trendChart, rangeChart, forecastChart;

            // Initialize all charts
            function initializeCharts() {
                const ctx = document.getElementById('candlestickChart').getContext('2d');
                mainChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: [],
                        datasets: [{
                            label: 'Price',
                            data: [],
                            borderColor: '#00ffcc',
                            backgroundColor: '#00ffcc',
                            borderWidth: 2,
                            pointRadius: 0,
                            pointHoverRadius: 5,
                            pointHoverBackgroundColor: '#00ffcc',
                            pointHoverBorderColor: '#fff',
                            pointHoverBorderWidth: 2,
                            tension: 0.1,
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        interaction: {
                            intersect: false,
                            mode: 'index',
                            axis: 'x'
                        },
                        scales: {
                            x: {
                                position: 'left',
                                grid: {
                                    color: '#1c2230'
                                },
                                ticks: {
                                    color: '#e1e1e1',
                                    font: {
                                        size: 11
                                    }
                                },
                                reverse: false
                            },
                            y: {
                                position: 'left',
                                grid: {
                                    color: '#1c2230'
                                },
                                ticks: {
                                    color: '#e1e1e1',
                                    font: {
                                        size: 11
                                    }
                                }
                            }
                        },
                        plugins: {
                            legend: {
                                display: false
                            },
                            tooltip: {
                                enabled: true,
                                backgroundColor: '#131722',
                                titleColor: '#e1e1e1',
                                bodyColor: '#e1e1e1',
                                borderColor: '#1c2230',
                                borderWidth: 1,
                                padding: 12,
                                displayColors: false,
                                mode: 'index',
                                intersect: false,
                                callbacks: {
                                    title: function(tooltipItems) {
                                        return 'Date: ' + tooltipItems[0].label;
                                    },
                                    label: function(context) {
                                        const i = context.dataIndex;
                                        const data = context.dataset.data[i];
                                        const priceChange = data.close - data.open;
                                        const percentChange = (priceChange / data.open * 100).toFixed(2);
                                        const color = priceChange >= 0 ? '#22ab94' : '#f23645';
                                        
                                        return [
                                            `Open: $${data.open.toFixed(2)}`,
                                            `High: $${data.high.toFixed(2)}`,
                                            `Low: $${data.low.toFixed(2)}`,
                                            `Close: $${data.close.toFixed(2)}`,
                                            `Volume: ${data.volume.toLocaleString()}`,
                                            `Change: ${priceChange >= 0 ? '+' : ''}${priceChange.toFixed(2)} (${percentChange}%)`
                                            ];
                                    }
                                }
                            }
                        }
                    },
                });
                
                const volumeCtx = document.getElementById('volumeChart').getContext('2d');
                volumeChart = new Chart(volumeCtx, {
                    type: 'bar',
                    data: {
                        labels: [],
                        datasets: [{
                            label: 'Volume',
                            data: [],
                            backgroundColor: '#7b7880',
                        }],
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        interaction: {
                            intersect: false,
                            mode: 'index',
                            axis: 'x'
                        },
                        scales: {
                            x: {
                                display: true
                            },
                            y: {
                                position: 'left',
                                grid: {
                                    color: '#1c2230'
                                },
                                ticks: {
                                    color: '#e1e1e1'
                                }
                            }
                        },
                        plugins: {
                            legend: {
                                display: false
                            },
                            tooltip: {
                                mode: 'index',
                                intersect: false,
                                backgroundColor: '#131722',
                                titleColor: '#e1e1e1',
                                bodyColor: '#e1e1e1',
                                callbacks: {
                                    label: function(context) {
                                        return `Volume: ${context.parsed.y.toLocaleString()}`;
                                    }
                                }
                            }
                        }
                    },
                });

                const trendCtx = document.getElementById('trendChart').getContext('2d');
                trendChart = new Chart(trendCtx, {
                    type: 'line',
                    data: {
                        labels: [],
                        datasets: [{
                            label: 'Price Trend',
                            data: [],
                            backgroundColor: '#FF1493',
                            borderColor: '#FF1493',
                            borderWidth: 1,
                            fill: false,
                            tension: 0.4,
                        }],
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        interaction: {
                            intersect: false,
                            mode: 'index',
                            axis: 'x'
                        },
                        plugins: {
                            legend: {
                                labels: { color: '#FFFFFF' }
                            },
                            tooltip: {
                                mode: 'index',
                                intersect: false,
                                backgroundColor: '#131722',
                                titleColor: '#e1e1e1',
                                bodyColor: '#e1e1e1',
                                callbacks: {
                                    label: function(context) {
                                        return `Price: $${context.parsed.y.toFixed(2)}`;
                                    }
                                }
                            }
                        },
                        scales: {
                            y: {
                                ticks: { color: '#FFFFFF' },
                                grid: { color: 'rgba(255, 255, 255, 0.1)' }
                            },
                            x: {
                                ticks: { color: '#FFFFFF' },
                                grid: { color: 'rgba(255, 255, 255, 0.1)' }
                            }
                        }
                    },
                });

                const rangeCtx = document.getElementById('rangeChart').getContext('2d');
                rangeChart = new Chart(rangeCtx, {
                    type: 'bar',
                    data: {
                        labels: [],
                        datasets: [{
                            label: 'Price Range',
                            data: [],
                            backgroundColor: '#00FFFF',
                            borderColor: '#FFFFFF',
                            borderWidth: 1
                        }],
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        interaction: {
                            intersect: false,
                            mode: 'index',
                            axis: 'x'
                        },
                        plugins: {
                            legend: {
                                labels: { color: '#FFFFFF' }
                            },
                            tooltip: {
                                mode: 'index',
                                intersect: false,
                                backgroundColor: '#131722',
                                titleColor: '#e1e1e1',
                                bodyColor: '#e1e1e1',
                                callbacks: {
                                    title: function(tooltipItems) {
                                        return 'Date: ' + tooltipItems[0].label;
                                    },
                                    label: function(context) {
                                        const data = context.dataset.data[context.dataIndex];
                                        return [
                                            `High: $${data.high.toFixed(2)}`,
                                            `Low: $${data.low.toFixed(2)}`,
                                            `Range: $${(data.high - data.low).toFixed(2)}`
                                        ];
                                    }
                                }
                            }
                        },
                        scales: {
                            y: {
                                ticks: { color: '#FFFFFF' },
                                grid: { color: 'rgba(255, 255, 255, 0.1)' }
                            },
                            x: {
                                ticks: { color: '#FFFFFF' },
                                grid: { color: 'rgba(255, 255, 255, 0.1)' }
                            }
                        }
                    },
                });
            }

            // Initialize Forecast Chart
            function initializeForecastChart() {
                const ctx = document.getElementById('forecastChart').getContext('2d');
                forecastChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        datasets: [{
                                label: 'Historical Price',
                            data: [],
                            borderColor: 'rgba(0, 255, 204, 0.8)',
                            backgroundColor: 'rgba(0, 255, 204, 0.1)',
                            borderWidth: 1.5,
                            pointRadius: 0,
                            order: 2,
                            fill: false
                        }, {
                                label: 'Forecasted Price',
                            data: [],
                            borderColor: 'rgba(255, 105, 180, 1)',
                            backgroundColor: 'rgba(255, 105, 180, 0.1)',
                            borderWidth: 2.5,
                            pointRadius: 0,
                            order: 1,
                            fill: false,
                            borderDash: [5, 5]
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        animation: {
                            duration: 0
                        },
                        interaction: {
                            mode: 'nearest',
                            axis: 'x',
                            intersect: false
                        },
                        plugins: {
                            legend: {
                                display: true,
                                labels: {
                                    color: '#e1e1e1',
                                    usePointStyle: true,
                                    padding: 20,
                                    font: { size: 12 }
                                }
                            },
                            tooltip: {
                                enabled: true,
                                mode: 'nearest',
                            intersect: false,
                                backgroundColor: 'rgba(0, 0, 0, 0.8)',
                                titleColor: '#fff',
                                bodyColor: '#fff',
                                padding: 10,
                                displayColors: true,
                                callbacks: {
                                    title: function(tooltipItems) {
                                        return new Date(tooltipItems[0].raw.x).toLocaleString();
                                    },
                                    label: function(context) {
                                        const price = context.raw.y;
                                        const formattedPrice = new Intl.NumberFormat('en-US', {
                                            style: 'currency',
                                            currency: 'USD'
                                        }).format(price);

                                        if (context.datasetIndex === 1) {
                                            const historicalData = context.chart.data.datasets[0].data;
                                            const lastHistoricalPrice = historicalData[historicalData.length - 1].y;
                                            const change = ((price - lastHistoricalPrice) / lastHistoricalPrice) * 100;
                                            return `${context.dataset.label}: ${formattedPrice} (${change >= 0 ? '+' : ''}${change.toFixed(2)}%)`;
                                        }
                                        return `${context.dataset.label}: ${formattedPrice}`;
                                    }
                                }
                            }
                        },
                        scales: {
                            x: {
                                type: 'time',
                                time: {
                                    parser: 'yyyy-MM-dd HH:mm:ss',
                                    unit: 'hour',
                                    displayFormats: {
                                        millisecond: 'HH:mm:ss.SSS',
                                        second: 'HH:mm:ss',
                                        minute: 'HH:mm',
                                        hour: 'HH:mm',
                                        day: 'MMM d',
                                        week: 'MMM d',
                                        month: 'MMM yyyy',
                                        quarter: 'MMM yyyy',
                                        year: 'yyyy'
                                    }
                                },
                                grid: {
                                    display: true,
                                    color: 'rgba(255, 255, 255, 0.1)'
                                },
                                ticks: {
                                    source: 'auto',
                                    maxRotation: 0,
                                    color: '#e1e1e1',
                                    autoSkip: true,
                                    maxTicksLimit: 10
                                    }
                            },
                            y: {
                                position: 'left',
                                grid: {
                                    color: 'rgba(255, 255, 255, 0.1)'
                                },
                                ticks: {
                                    color: '#e1e1e1',
                                    callback: value => new Intl.NumberFormat('en-US', {
                                                style: 'currency', 
                                        currency: 'USD'
                                    }).format(value)
                                        }
                                    }
                                }
                            }
                });
                return forecastChart;
            }
            
            // Initialize all charts
            initializeCharts();
            initializeForecastChart();
    
            // Sidebar toggle functionality
            menuToggle.addEventListener('click', function() {
                sidebar.classList.toggle('active');
            });
    
            // Add click events to sidebar items
            document.querySelectorAll('.sidebar-item').forEach(item => {
                item.addEventListener('click', function(e) {
                    e.preventDefault();
    
                    // Remove active class from all sidebar items
                    document.querySelectorAll('.sidebar-item').forEach(sideItem => {
                        sideItem.classList.remove('active');
                    });
    
                    // Add active class to clicked item
                    this.classList.add('active');
    
                    // Update navbar title
                    const newTitle = this.getAttribute('data-title');
                    navTitle.textContent = newTitle;
    
                    // Hide all containers first
                    document.querySelectorAll('.content-container').forEach(container => {
                        container.classList.remove('active');
                    });
    
                    // Show selected container
                    const targetId = this.getAttribute('data-target');
                    const targetContainer = document.getElementById(targetId);
                    targetContainer.classList.add('active');
    
                    // Always hide the main search container (will be conditionally shown if needed)
                    mainSearchContainer.style.display = 'none';
                    
                    // Show the main search container only when in Stock Analysis tab
                    if (targetId === 'stockAnalysisContainer') {
                        mainSearchContainer.style.display = 'flex';
                    }
    
                    // Fetch news when news tab is clicked
                    if (targetId === 'newsContainer') {
                        fetchAndDisplayNews();
                    }
    
                    // Close sidebar after selection
                    sidebar.classList.remove('active');
                });
            });
    
            // Search functionality on Enter key or search icon click
            const searchIcon = document.querySelector('.search-icon');
            searchIcon.addEventListener('click', () => updateChartsTimeframe(document.querySelector('.buttons button').dataset.interval));
            
            stockInput.addEventListener('keypress', function (e) {
                if (e.key === 'Enter') updateChartsTimeframe(document.querySelector('.buttons button').dataset.interval);
            });
            
            // Add event listeners for duration buttons
            document.querySelectorAll('.buttons button').forEach(button => {
                button.addEventListener('click', function () {
                    // Remove active class from all buttons
                    document.querySelectorAll('.buttons button').forEach(btn => btn.classList.remove('active-button'));
                    
                    // Add active class to the clicked button
                    this.classList.add('active-button');
            
                    // Update charts timeframe
                    const period = this.getAttribute('data-interval');
                    updateChartsTimeframe(period);
                });
            });
            
            
            // Global function for onclick handlers in HTML buttons
            window.updateTimeframe = function(period, extraParam, customRange) {
                // Check if we're in the forecast view
                const isForecastContainer = document.getElementById('futureForecastingContainer').classList.contains('active');
                
                // If we're in the forecast view, use the forecast input
                if (isForecastContainer) {
                    const forecastInput = document.getElementById('forecastInput');
                    const symbol = forecastInput.value.trim();
                    if (!symbol) {
                        alert('Please enter a company name or ticker symbol.');
                        return;
                    }
                    // Call the forecast data function
                    fetchAndUpdateForecastData(symbol, period, extraParam, customRange);
                } else {
                    // Original code for stock analysis
                    updateChartsTimeframe(period);
                }
            };

            // Function to update charts timeframe
            function updateChartsTimeframe(period) {
                const symbol = stockInput.value.trim();
                if (!symbol) {
                    alert('Please enter a company name or ticker symbol.');
                    return;
                }
                if (symbol) {
                    fetchAndUpdateData(symbol, period);
                }
            }

            //-------------------------UPDATE DATA OF THE CHARTS-----------------
            // Function to fetch and update data
            async function fetchAndUpdateData(symbol, duration) {
                try {
                    document.querySelector('.loading').classList.add('active');
                    
                    let url = `http://127.0.0.1:5000/stock-data?symbol=${symbol}&duration=${duration}`;
                    
                    const response = await fetch(url);
                    const jsonData = await response.json();

                    document.querySelector('.loading').classList.remove('active');

                    if (!jsonData || jsonData.error) {
                        alert(jsonData.error || 'Invalid data received from server.');
                        return;
                    }

                    // Format data for charts
                    const dates = jsonData.map(item => item.datetime).reverse();
                    const openPrices = jsonData.map(item => parseFloat(item.open)).reverse();
                    const highPrices = jsonData.map(item => parseFloat(item.high)).reverse();
                    const lowPrices = jsonData.map(item => parseFloat(item.low)).reverse();
                    const closePrices = jsonData.map(item => parseFloat(item.close)).reverse();
                    const volumes = jsonData.map(item => parseInt(item.volume, 10)).reverse();

                    // Create properly formatted data for the main chart
                    const chartData = closePrices.map((price, index) => ({
                        x: dates[index],
                        y: price,
                        open: openPrices[index],
                        high: highPrices[index],
                        low: lowPrices[index],
                        close: closePrices[index],
                        volume: volumes[index]
                    }));
                    
                    // Update main chart with formatted data
                    mainChart.data.labels = dates;
                    mainChart.data.datasets[0].data = chartData;
                    mainChart.options.scales.y.min = Math.min(...closePrices) * 0.995;
                    mainChart.options.scales.y.max = Math.max(...closePrices) * 1.005;
                    mainChart.update('none');
                    
                    // Update volume chart
                    volumeChart.data.labels = dates;
                    volumeChart.data.datasets[0].data = volumes;
                    volumeChart.update();
                    
                    // Update trend chart
                    trendChart.data.labels = dates;
                    trendChart.data.datasets[0].data = closePrices;
                    trendChart.update();
                    
                    // Update range chart
                    rangeChart.data.labels = dates;
                    rangeChart.data.datasets[0].data = highPrices.map((high, i) => ({
                        x: dates[i],
                        y: high - lowPrices[i],
                        high: high,
                        low: lowPrices[i]
                    }));
                    rangeChart.update();
                    
                    // Update stats panel
                    const latestData = closePrices[closePrices.length - 1];
                    document.getElementById('currentPrice').textContent = `$${latestData.toFixed(2)}`;
                    document.getElementById('dayRange').textContent = 
                        `$${Math.min(...lowPrices).toFixed(2)} - $${Math.max(...highPrices).toFixed(2)}`;
                    document.getElementById('volume').textContent = 
                        volumes.reduce((a, b) => a + b, 0).toLocaleString();
                    
                    const priceChange = latestData - openPrices[0];
                    const percentChange = (priceChange / openPrices[0] * 100).toFixed(2);
                    document.getElementById('priceChange').textContent = 
                        `${priceChange >= 0 ? '+' : ''}${priceChange.toFixed(2)} (${percentChange}%)`;

                } catch (error) {
                    console.error('Error fetching data:', error);
                    alert('An error occurred while fetching data.');
                }
            }


            // Function to fetch and update forecast data
            async function fetchAndUpdateForecastData(symbol, duration) {
                try {
                    // Show loading container and update progress
                    const loadingContainer = document.getElementById('loadingContainer');
                    loadingContainer.style.display = 'block';
                    updateProgress(10, 'Starting');

                    // Construct URL and fetch data
                    const url = `http://127.0.0.1:5000/forecast?symbol=${encodeURIComponent(symbol)}&duration=${encodeURIComponent(duration)}`;
                    console.log('Fetching from:', url);
                    updateProgress(30, 'Data fetching');
                    
                    const response = await fetch(url);
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    updateProgress(50, 'Data received');

                    const data = await response.json();
                    if (!data || data.error) {
                        throw new Error(data.error || 'Invalid data received');
                    }
                    updateProgress(70, 'Data parsed');

                    console.log('Received data:', data);

                    // Process historical data
                    const historicalEntries = Object.entries(data.historical);
                    const historicalDates = historicalEntries.map(([date]) => date);
                    const historicalPrices = historicalEntries.map(([, values]) => parseFloat(values['4. close']));

                    // Sort historical data by date
                    const sortedIndices = historicalDates
                        .map((date, index) => ({ date, index }))
                        .sort((a, b) => new Date(a.date) - new Date(b.date))
                        .map(item => item.index);

                    const sortedDates = sortedIndices.map(i => historicalDates[i]);
                    const sortedPrices = sortedIndices.map(i => historicalPrices[i]);

                    updateProgress(85, 'Historical data processed');

                    // Process and sort forecast data
                    const sortedForecast = data.forecast
                        .sort((a, b) => new Date(a.datetime) - new Date(b.datetime))
                        .map(item => ({
                            datetime: item.datetime,
                            close: parseFloat(item.close)
                        }));

                    console.log('Processed data:', {
                        historicalDates: sortedDates.length,
                        historicalPrices: sortedPrices.length,
                        forecast: sortedForecast.length
                    });

                    updateProgress(95, 'Forecast data processed');

                    // Update chart with processed data
                    await updateForecastChartWithData(sortedDates, sortedPrices, sortedForecast);
                    
                    updateProgress(100, 'Chart updated');
                    setTimeout(() => {
                        loadingContainer.style.display = 'none';
                    }, 500);
                    
                } catch (error) {
                    console.error('Error fetching forecast data:', error);
                    alert('Error: ' + error.message);
                    document.getElementById('loadingContainer').style.display = 'none';
                }
            }
            
            // Update progress bar function with status message
            function updateProgress(percent, status) {
                const progressBar = document.querySelector('#loadingContainer .progress');
                const progressText = document.querySelector('#loadingContainer .progress-text');
                const statusText = document.querySelector('#loadingContainer .status-text');
                
                if (progressBar && progressText && statusText) {
                    progressBar.style.width = `${percent}%`;
                    progressText.textContent = `${percent}%`;
                    statusText.textContent = status;

                    // Add loading effect class at 50%
                    if (percent >= 50) {
                        progressBar.classList.add('loading');
                    }
                    // Remove loading effect class at 100%
                    if (percent === 100) {
                        progressBar.classList.remove('loading');
                    }
                }
            }
            
            // Function to update the forecast chart with historical and forecast data
            async function updateForecastChartWithData(historicalDates, historicalPrices, forecastData) {
                console.log('Processing data for chart update:', {
                    historicalDates: historicalDates.length,
                    historicalPrices: historicalPrices.length,
                    forecastData: forecastData.length
                });

                // Convert historical data
                const historicalPoints = historicalDates.map((date, i) => ({
                    x: new Date(date).toISOString(),
                    y: historicalPrices[i]
                }));

                // Convert and process forecast data
                const forecastPoints = forecastData.map(item => ({
                    x: new Date(item.datetime).toISOString(),
                    y: item.close
                }));
                
                console.log('Converted data points:', {
                    historical: historicalPoints.slice(0, 2),
                    forecast: forecastPoints.slice(0, 2)
                });

                // Sort all points by time
                historicalPoints.sort((a, b) => new Date(a.x) - new Date(b.x));
                forecastPoints.sort((a, b) => new Date(a.x) - new Date(b.x));

                // Calculate time difference for x-axis unit
                const timeSpan = new Date(forecastPoints[forecastPoints.length - 1].x) - new Date(historicalPoints[0].x);
                const timeUnit = timeSpan < 86400000 ? 'hour' : // less than a day
                               timeSpan < 604800000 ? 'day' :   // less than a week
                               timeSpan < 2592000000 ? 'week' : // less than a month
                               'month';

                // Update chart options for the selected time unit
                forecastChart.options.scales.x.time.unit = timeUnit;

                // Calculate y-axis range with padding
                const allPrices = [...historicalPoints.map(p => p.y), ...forecastPoints.map(p => p.y)];
                const minPrice = Math.min(...allPrices);
                const maxPrice = Math.max(...allPrices);
                const padding = (maxPrice - minPrice) * 0.1;

                // Clear existing data
                forecastChart.data.datasets[0].data = [];
                forecastChart.data.datasets[1].data = [];
                
                // Update chart data
                forecastChart.data.datasets[0].data = historicalPoints;
                forecastChart.data.datasets[1].data = forecastPoints;

                // Update y-axis range
                forecastChart.options.scales.y.min = minPrice - padding;
                forecastChart.options.scales.y.max = maxPrice + padding;

                // Log the data being set
                console.log('Setting chart data:', {
                    historicalPoints: historicalPoints.length,
                    forecastPoints: forecastPoints.length,
                    yRange: {
                        min: minPrice - padding,
                        max: maxPrice + padding
                    }
                });

                // Update chart with animation disabled
                forecastChart.options.animation = false;
                await forecastChart.update();
                forecastChart.options.animation = { duration: 0 };

                // Update stats panel
                if (forecastPoints.length > 0) {
                    const lastHistoricalPrice = historicalPoints[historicalPoints.length - 1].y;
                    const lastForecastPrice = forecastPoints[forecastPoints.length - 1].y;
                    const priceChange = lastForecastPrice - lastHistoricalPrice;
                    const percentageChange = (priceChange / lastHistoricalPrice) * 100;

                    document.getElementById('predictedPrice').textContent = 
                        new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' })
                            .format(lastForecastPrice);
                    
                    const changeElement = document.getElementById('predictedChange');
                    changeElement.textContent = `${percentageChange >= 0 ? '+' : ''}${percentageChange.toFixed(2)}%`;
                    changeElement.style.color = percentageChange >= 0 ? '#00ff00' : '#ff4444';
                }
            }

            // Add this function to handle forecast button clicks
            function updateForecastTimeframe(duration) {
                const symbol = document.getElementById('forecastInput').value.trim();
                if (!symbol) {
                    alert('Please enter a stock symbol');
                    return;
                }
                fetchAndUpdateForecastData(symbol, duration);
            }

            // Update the forecast buttons to use the new function
            document.querySelectorAll('#futureForecastingContainer .forecast-buttons button').forEach(button => {
                button.addEventListener('click', function() {
                    const duration = this.getAttribute('data-interval');
                    updateForecastTimeframe(duration);
                    
                    // Update active button state
                    document.querySelectorAll('#futureForecastingContainer .forecast-buttons button').forEach(btn => {
                        btn.classList.remove('active-button');
                    });
                    this.classList.add('active-button');
                });
            });
        });
        
        //---------------NEWS SECTION---------
        // Add this function to fetch and display news
        async function fetchAndDisplayNews() {
            try {
                const response = await fetch('https://finnhub.io/api/v1/news?category=general&token=cvm3r89r01qnndmbus70cvm3r89r01qnndmbus7g');
                const newsData = await response.json();
                
                const newsGrid = document.querySelector('.news-grid');
                newsGrid.innerHTML = ''; // Clear existing news
    
                newsData.forEach(news => {
                    const newsCard = document.createElement('div');
                    newsCard.className = 'news-card';
                    
                    // Convert Unix timestamp to readable date
                    const date = new Date(news.datetime * 1000).toLocaleDateString('en-US', {
                        year: 'numeric',
                        month: 'long',
                        day: 'numeric'
                    });
    
                    newsCard.innerHTML = `
                        <img src="${news.image}" alt="${news.headline}" onerror="this.src='https://via.placeholder.com/400x200?text=No+Image'">
                        <div class="news-content">
                            <h3>${news.headline}</h3>
                            <p>${news.summary}</p>
                            <div class="news-meta">
                                <span class="news-source">${news.source}</span>
                                <span class="news-date">${date}</span>
                            </div>
                            <a href="${news.url}" target="_blank" class="read-more">Read More</a>
                        </div>
                    `;
                    
                    newsGrid.appendChild(newsCard);
                });
            } catch (error) {
                console.error('Error fetching news:', error);
                document.querySelector('.news-grid').innerHTML = '<p class="error-message">Failed to load news. Please try again later.</p>';
            }
        }
    </script>
</body>
</html>